---
import { Image } from 'astro:assets';

interface Props {
  href: string;
  title: string;
  body: string;
  bgImg: ImageMetadata;
  uiImgs: ImageMetadata[];
  bgAlt?: string;
  uiAlts?: string[];
  className?: string;
}

const { href, title, body, bgImg, uiImgs, bgAlt = `${title} background`, uiAlts, className } = Astro.props;
---

<div
  data-project-card
  class={`transition-all duration-300 shadow-sm hover:shadow-lift-lg ${className || ''}`}
>
  <a href={href} class='project-card-link'>
    <div class='h-full'>
      <div class='relative aspect-square overflow-hidden'>
        <div class='absolute bottom-1 right-1 z-10 flex h-2/5 gap-2'>
          {
            uiImgs.map((img, idx) => (
              <Image
                class='ml-auto w-auto'
                src={img}
                alt={uiAlts?.[idx] || `${title} UI preview ${idx + 1}`}
              />
            ))
          }
        </div>
        <Image
          class='absolute inset-0 h-full w-full object-cover'
          src={bgImg}
          alt={bgAlt}
        />
      </div>
      <div class='flex flex-col bg-sand dark:bg-slate p-4'>
        <div class='mb-2 text-lg'>
          {title}
        </div>
        <p class='mb-2'>{body}</p>
        <div class=''>View Project</div>
      </div>
    </div>
  </a>
</div>

<style>
  [data-project-card] {
    transition: all 300ms ease-out;
    border-radius: 4px;
  }

  [data-project-card]:hover {
    transform: translateY(-8px);
  }

  .project-card-link {
    display: block;
    transition: opacity 250ms ease-out;
  }

  .project-card-link:hover {
    opacity: 0.95;
  }

  .project-card-link:focus-visible {
    outline: 3px solid #1C1A18; /* slate */
    outline-offset: 4px;
  }

  :global(.dark) .project-card-link:focus-visible {
    outline-color: #FAF8F3; /* white */
  }

  /* Enhanced dark mode shadows for card lift */
  :global(.dark) [data-project-card]:hover {
    box-shadow: 0 12px 32px rgba(250, 248, 243, 0.15);
  }

  [data-project-card]:hover {
    box-shadow: 0 12px 32px rgba(15, 14, 13, 0.2);
  }
</style>
