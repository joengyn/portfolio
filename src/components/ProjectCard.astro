---
import { Image } from 'astro:assets';

interface Props {
  href: string;
  title: string;
  body: string;
  bgImg: ImageMetadata;
  uiImg: ImageMetadata;
  logo?: ImageMetadata;
  logoAlt?: string;
  bgAlt?: string;
  uiAlt?: string;
  className?: string;
}

const { href, title, body, bgImg, uiImg, logo, logoAlt = `${title} logo`, bgAlt = `${title} background`, uiAlt = `${title} UI preview`, className } = Astro.props;

// Create unique transition name based on href (e.g., /berkshiregrey)
const projectSlug = href.replace(/\//g, '');
const imageTransitionName = `project-image-${projectSlug}`;
---

<button
  type='button'
  data-project-card
  data-project-slug={projectSlug}
  class={`transition-all duration-300 hover:shadow-lift-lg ${className || ''} cursor-pointer w-full text-left bg-transparent border-0 p-0`}
>
  <div
    class='h-full'
  >
    <div
      class='relative aspect-square overflow-hidden'
      data-image-container
      style={{
        viewTransitionName: imageTransitionName,
      }}
    >
      <Image
        class='absolute bottom-1 right-1 z-10 aspect-auto h-2/5 w-auto'
        src={uiImg}
        alt={uiAlt}
      />
      <Image
        class='absolute inset-0 h-full w-full object-cover'
        src={bgImg}
        alt={bgAlt}
      />
    </div>
    <div class='flex flex-col bg-sand dark:bg-slate p-4'>
      <div
        class='mb-2 text-lg'
      >
        {title}
      </div>
      <p class='mb-2'>{body}</p>
      <div class=''>View Project</div>
    </div>
  </div>
</button>

<style>
  [data-project-card] {
    transition: all 300ms ease-out;
    border-radius: 4px;
    cursor: pointer;
  }

  [data-project-card]:hover {
    transform: translateY(-8px) scale(1.02);
  }

  [data-project-card]:focus-visible {
    outline: 3px solid #1C1A18; /* slate */
    outline-offset: 4px;
  }

  :global(.dark) [data-project-card]:focus-visible {
    outline-color: #FAF8F3; /* white */
  }

  /* Enhanced dark mode shadows for card lift */
  :global(.dark) [data-project-card]:hover {
    box-shadow: 0 12px 32px rgba(250, 248, 243, 0.15);
  }

  [data-project-card]:hover {
    box-shadow: 0 12px 32px rgba(15, 14, 13, 0.2);
  }
</style>

